<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/Digital-Interfaces/test/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/Digital-Interfaces/test/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li:not(:nth-child(2)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li > ul > li a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(3) > ul > li:nth-child(2) > ul > li:nth-child(2) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(3) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(3) > ul > li:nth-child(2) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(3) > ul > li:nth-child(2) > ul > li:nth-child(2) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(3) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(3) > ul.nav-list > li.nav-list-item:nth-child(2) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(3) > ul.nav-list > li.nav-list-item:nth-child(2) > ul.nav-list > li.nav-list-item:nth-child(2) > ul.nav-list { display: block; } </style> <script src="/Digital-Interfaces/test/assets/js/vendor/lunr.min.js"></script> <script src="/Digital-Interfaces/test/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Step 2: Setting up the states | Digital Interfaces</title> <meta name="generator" content="Jekyll v3.10.0" /> <meta property="og:title" content="Step 2: Setting up the states" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Repository for the BSc course Digital Interfaces" /> <meta property="og:description" content="Repository for the BSc course Digital Interfaces" /> <meta property="og:site_name" content="Digital Interfaces" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Step 2: Setting up the states" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Repository for the BSc course Digital Interfaces","headline":"Step 2: Setting up the states","url":"/Digital-Interfaces/test/tutorials/02-pomodoro/step2.html"}</script> <!-- End Jekyll SEO tag --> <!-- CSS and JS for jekyll-tabs --> <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jekyll-tabs@1.1.0/dist/tabs.css"> --> <!-- <script type="text/javascript" src="/assets/js/tabs.js"></script> --> <script src="/Digital-Interfaces/test/assets/js/tabs.js" type="text/javascript"></script> <link rel="stylesheet" href="/Digital-Interfaces/test/assets/css/tabs.css"> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/Digital-Interfaces/test/" class="site-title lh-tight"> Digital Interfaces </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/" class="nav-list-link">Home</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Assignments category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/assignments/" class="nav-list-link">Assignments</a><ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/01-digital-interface-safari/" class="nav-list-link">1: Digital Interfaces Safari</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in 2: Reaction Game category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/assignments/02-reaction-game/" class="nav-list-link">2: Reaction Game</a><ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/02-reaction-game/game_code_neopixel.html" class="nav-list-link">Game code for ChaiNEO</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/02-reaction-game/game_code_p9813.html" class="nav-list-link">Game code for Grove</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in 3: Game Controller category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/assignments/03-game-controller/" class="nav-list-link">3: Game Controller</a><ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/03-game-controller/coding_instructions.html" class="nav-list-link">Code instructions</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/03-game-controller/code_solution.html" class="nav-list-link">Code solution</a></li></ul></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/04-data-embodiment/" class="nav-list-link">4: Data Embodiment</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/05-walkie-talkie/" class="nav-list-link">5: Walkie-Talkie</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/06-party-lamp/" class="nav-list-link">6: Party Lamp</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in 7+8: Animistic Design category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/" class="nav-list-link">7+8: Animistic Design</a><ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/varspeed-library-guide.html" class="nav-list-link">VarSpeed Library Guide</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Fading and blinking a Chainable LED category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/fading-and-blinking-a-chainable-led-index.html" class="nav-list-link">Fading and blinking a Chainable LED</a><ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/fading-and-blinking-a-chainable-led/neopixel.html" class="nav-list-link">Chainable LED ChaiNEO</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/fading-and-blinking-a-chainable-led/p9813.html" class="nav-list-link">Chainable LED P9813</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Running two sequences simultaneously category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/running-two-sequences-index.html" class="nav-list-link">Running two sequences simultaneously</a><ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/running-two-sequences/neopixel.html" class="nav-list-link">Chainable LED ChaiNEO</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/running-two-sequences/p9813.html" class="nav-list-link">Chainable LED P9813</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Triggering different sequences based on context or interaction category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/trigger-different-sequences-index.html" class="nav-list-link">Triggering different sequences based on context or interaction</a><ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/trigger-different-sequences/neopixel.html" class="nav-list-link">Chainable LED ChaiNEO</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/trigger-different-sequences/p9813.html" class="nav-list-link">Chainable LED P9813</a></li></ul></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Tutorials category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/" class="nav-list-link">Tutorials</a><ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/tutorials/01-time/" class="nav-list-link">01 Time in CircuitPython</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in 02 Pomodoro category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/" class="nav-list-link">02 Pomodoro</a><ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step1.html" class="nav-list-link">Step 1: Preparation</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Step 2: Setting up the states category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step2.html" class="nav-list-link">Step 2: Setting up the states</a><ul class="nav-list"></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Step 3: Adding the LED category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step3.html" class="nav-list-link">Step 3: Adding the LED</a><ul class="nav-list"></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Step 4: Creating a timer category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step4.html" class="nav-list-link">Step 4: Creating a timer</a><ul class="nav-list"></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Step 5: Adding an alarm category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step5.html" class="nav-list-link">Step 5: Adding an alarm</a><ul class="nav-list"></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Step 6: Adding the breaks category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step6.html" class="nav-list-link">Step 6: Adding the breaks</a><ul class="nav-list"></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Step 7: Additional visualization using the servo category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step7.html" class="nav-list-link">Step 7: Additional visualization using the servo</a><ul class="nav-list"></ul></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step8.html" class="nav-list-link">Step 8 Assembling the embodiment</a></li></ul></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/tutorials/coding-challenge/" class="nav-list-link">Coding Challenge</a></li></ul></li></ul> <ul class="nav-list"><li class="nav-list-item external"> <a href="https://id-studiolab.github.io/Connected-Interaction-Kit" class="nav-list-link external" target="_blank" rel="noopener noreferrer" > Connected Interaction Kit <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li><li class="nav-list-item external"> <a href="https://brightspace.tudelft.nl/d2l/home/681612" class="nav-list-link external" target="_blank" rel="noopener noreferrer" > DI Brightspace <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li><li class="nav-list-item external"> <a href="https://hedy.org/" class="nav-list-link external" target="_blank" rel="noopener noreferrer" > Hedy - Python learning <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li><li class="nav-list-item external"> <a href="https://www.w3schools.com/python/" class="nav-list-link external" target="_blank" rel="noopener noreferrer" > W3Schools - Python <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li><li class="nav-list-item external"> <a href="https://docs.circuitpython.org/en/latest/README.html" class="nav-list-link external" target="_blank" rel="noopener noreferrer" > CircuitPython Docs <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Digital Interfaces" aria-label="Search Digital Interfaces" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/Digital-Interfaces/test/tutorials/">Tutorials</a></li> <li class="breadcrumb-nav-list-item"><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/">02 Pomodoro</a></li> <li class="breadcrumb-nav-list-item"><span>Step 2: Setting up the states</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="step-2a-setting-up-the-states"> <a href="#step-2a-setting-up-the-states" class="anchor-heading" aria-labelledby="step-2a-setting-up-the-states"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 2.A: Setting up the states </h1> <p>Upon startup, we would like the program to be in an idle state until the user explicitly starts the timer by means of a button press. To do so we will start with implementing two things:</p> <ol> <li>Variables and logic to handle the different states.</li> <li>A button to toggle between states.</li> </ol> <p>First we need to define three variables: <code class="language-plaintext highlighter-rouge">state_idle</code>, <code class="language-plaintext highlighter-rouge">state_work</code>, and <code class="language-plaintext highlighter-rouge">current_state</code>. We represent the different states as integers. We can add these variables under the <code class="language-plaintext highlighter-rouge">##—-Variables</code> paragraph:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">##--- Variables
# State variables
</span><span class="n">state_idle</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">state_work</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">current_state</span> <span class="o">=</span> <span class="n">state_idle</span>
</code></pre></div></div> <p>The integer stored in <code class="language-plaintext highlighter-rouge">current_state</code> can then be compared to the different states to decide what next steps to take inside the <code class="language-plaintext highlighter-rouge">##—- Main loop</code>:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">##--- Main loop
</span><span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="c1"># State Idle
</span>    <span class="k">if</span> <span class="n">current_state</span> <span class="o">==</span> <span class="n">state_idle</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="c1"># State Work
</span>    <span class="k">elif</span> <span class="n">current_state</span> <span class="o">==</span> <span class="n">state_work</span><span class="p">:</span>
        <span class="k">return</span>

</code></pre></div></div> <h1 id="step-2b-implementing-a-button"> <a href="#step-2b-implementing-a-button" class="anchor-heading" aria-labelledby="step-2b-implementing-a-button"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 2.B: Implementing a button </h1> <p>To switch between the two states, we can add a button to our system. We’ll need to import the <em>digitalio</em> and <em>board</em> libraries to communicate with the button.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">##--- Imports
</span><span class="kn">import</span> <span class="nn">digitalio</span>
<span class="kn">import</span> <span class="nn">board</span>

</code></pre></div></div> <p>Connect the button to pin <code class="language-plaintext highlighter-rouge">D7</code>. The following variables allow for communication with the button:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">##--- Variables
#...
# Button variables
</span><span class="n">buttonpin</span> <span class="o">=</span> <span class="n">board</span><span class="p">.</span><span class="n">D7</span>
<span class="n">button</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">DigitalInOut</span><span class="p">(</span><span class="n">buttonpin</span><span class="p">)</span>
<span class="n">button</span><span class="p">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">Direction</span><span class="p">.</span><span class="n">INPUT</span>

</code></pre></div></div> <p>We will need to create a function that can tell us when the button has been pressed. For this, we need two variables that keep track of the current and previous button states. To do this we can add two new variables in our <code class="language-plaintext highlighter-rouge">##—- Variables</code> paragraph:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">##--- Variables
#...
</span><span class="n">current_button_state</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">last_button_state</span> <span class="o">=</span> <span class="bp">False</span>

</code></pre></div></div> <p>When the last recorded button state is false, and the current button state is true, we know the button has been pressed. To use these states we create a function to check if the button is being pressed in the <code class="language-plaintext highlighter-rouge">##—- Functions</code> Paragraph:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">##--- Functions
##--- Acting Machine cause functions
</span><span class="k">def</span> <span class="nf">check_button_press</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">current_button_state</span><span class="p">,</span> <span class="n">last_button_state</span>
    <span class="n">button_press</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">current_button_state</span> <span class="o">=</span> <span class="n">button</span><span class="p">.</span><span class="n">value</span>

    <span class="k">if</span> <span class="n">current_button_state</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">last_button_state</span><span class="p">:</span>
        <span class="n">button_press</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="n">last_button_state</span> <span class="o">=</span> <span class="n">current_button_state</span>
    <span class="k">return</span> <span class="n">button_press</span>

</code></pre></div></div> <p>Let’s alter the main loop in our program to switch between the two states once the button is pressed:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">##--- Main loop
</span><span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="c1"># State Idle
</span>    <span class="k">if</span> <span class="n">current_state</span> <span class="o">==</span> <span class="n">state_idle</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">check_button_press</span><span class="p">():</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"Switch from Idle to Work"</span><span class="p">)</span> 
            <span class="n">current_state</span> <span class="o">=</span> <span class="n">state_work</span>

    <span class="c1"># State Work
</span>    <span class="k">elif</span> <span class="n">current_state</span> <span class="o">==</span> <span class="n">state_work</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">check_button_press</span><span class="p">():</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"Switch from Work to Idle"</span><span class="p">)</span> 
            <span class="n">current_state</span> <span class="o">=</span> <span class="n">state_idle</span>

</code></pre></div></div> <p>It’s time to upload your code to the ItsyBitsy and see if it works! Your code should now:</p> <ul> <li>Output a print statement once the state changes</li> <li>Switch between states upon button press</li> </ul> <p><a href="step2-code">Click here to see the code you should have until now.</a></p> <p><a href="step3" class="btn btn-blue">Next Step</a></p> <hr> <h2 class="text-delta">Table of contents</h2> <ul> <li> <a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step2-code.html">Step 2: Code until now</a> </li> </ul> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
