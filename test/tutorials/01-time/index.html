<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/Digital-Interfaces/test/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/Digital-Interfaces/test/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li:not(:nth-child(1)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(3) > ul > li:nth-child(1) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(3) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(3) > ul > li:nth-child(1) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(3) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(3) > ul.nav-list > li.nav-list-item:nth-child(1) > ul.nav-list { display: block; } </style> <script src="/Digital-Interfaces/test/assets/js/vendor/lunr.min.js"></script> <script src="/Digital-Interfaces/test/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>01 Time in CircuitPython | Digital Interfaces</title> <meta name="generator" content="Jekyll v3.10.0" /> <meta property="og:title" content="01 Time in CircuitPython" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Repository for the BSc course Digital Interfaces" /> <meta property="og:description" content="Repository for the BSc course Digital Interfaces" /> <meta property="og:site_name" content="Digital Interfaces" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="01 Time in CircuitPython" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Repository for the BSc course Digital Interfaces","headline":"01 Time in CircuitPython","url":"/Digital-Interfaces/test/tutorials/01-time/"}</script> <!-- End Jekyll SEO tag --> <!-- Needed for jekyll-code-tabs to work --> <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uikit@3/dist/css/uikit.min.css" /> <script src="https://cdn.jsdelivr.net/npm/uikit@3/dist/js/uikit.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/uikit@3/dist/js/uikit-icons.min.js"></script> --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/Digital-Interfaces/test/" class="site-title lh-tight"> Digital Interfaces </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/" class="nav-list-link">Home</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Assignments category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/assignments/" class="nav-list-link">Assignments</a><ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/01-digital-interface-safari/" class="nav-list-link">1: Digital Interfaces Safari</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in 2: Reaction Game category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/assignments/02-reaction-game/" class="nav-list-link">2: Reaction Game</a><ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/02-reaction-game/game_code_neopixel.html" class="nav-list-link">Game code for ChaiNEO</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/02-reaction-game/game_code_p9813.html" class="nav-list-link">Game code for Grove</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in 3: Game Controller category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/assignments/03-game-controller/" class="nav-list-link">3: Game Controller</a><ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/03-game-controller/coding_instructions.html" class="nav-list-link">Code instructions</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/03-game-controller/code_solution.html" class="nav-list-link">Code solution</a></li></ul></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/04-data-embodiment/" class="nav-list-link">4: Data Embodiment</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/05-walkie-talkie/" class="nav-list-link">5: Walkie-Talkie</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/06-party-lamp/" class="nav-list-link">6: Party Lamp</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in 7+8: Animistic Design category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/" class="nav-list-link">7+8: Animistic Design</a><ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/varspeed-library-guide.html" class="nav-list-link">VarSpeed Library Guide</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Fading and blinking a Chainable LED category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/fading-and-blinking-a-chainable-led-index.html" class="nav-list-link">Fading and blinking a Chainable LED</a><ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/fading-and-blinking-a-chainable-led/neopixel.html" class="nav-list-link">Chainable LED ChaiNEO</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/fading-and-blinking-a-chainable-led/p9813.html" class="nav-list-link">Chainable LED P9813</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Running two sequences simultaneously category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/running-two-sequences-index.html" class="nav-list-link">Running two sequences simultaneously</a><ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/running-two-sequences/neopixel.html" class="nav-list-link">Chainable LED ChaiNEO</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/running-two-sequences/p9813.html" class="nav-list-link">Chainable LED P9813</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Triggering different sequences based on context or interaction category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/trigger-different-sequences-index.html" class="nav-list-link">Triggering different sequences based on context or interaction</a><ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/trigger-different-sequences/neopixel.html" class="nav-list-link">Chainable LED ChaiNEO</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/trigger-different-sequences/p9813.html" class="nav-list-link">Chainable LED P9813</a></li></ul></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Tutorials category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/" class="nav-list-link">Tutorials</a><ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/tutorials/01-time/" class="nav-list-link">01 Time in CircuitPython</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in 02 Pomodoro category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/" class="nav-list-link">02 Pomodoro</a><ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step1.html" class="nav-list-link">Step 1: Preparation</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Step 2: Setting up the states category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step2.html" class="nav-list-link">Step 2: Setting up the states</a><ul class="nav-list"></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Step 3: Adding the LED category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step3.html" class="nav-list-link">Step 3: Adding the LED</a><ul class="nav-list"></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Step 4: Creating a timer category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step4.html" class="nav-list-link">Step 4: Creating a timer</a><ul class="nav-list"></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Step 5: Adding an alarm category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step5.html" class="nav-list-link">Step 5: Adding an alarm</a><ul class="nav-list"></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Step 6: Adding the breaks category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step6.html" class="nav-list-link">Step 6: Adding the breaks</a><ul class="nav-list"></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Step 7: Additional visualization using the servo category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step7.html" class="nav-list-link">Step 7: Additional visualization using the servo</a><ul class="nav-list"></ul></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step8.html" class="nav-list-link">Step 8 Assembling the embodiment</a></li></ul></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/tutorials/coding-challenge/" class="nav-list-link">Coding Challenge</a></li></ul></li></ul> <ul class="nav-list"><li class="nav-list-item external"> <a href="https://id-studiolab.github.io/Connected-Interaction-Kit" class="nav-list-link external" target="_blank" rel="noopener noreferrer" > Connected Interaction Kit <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li><li class="nav-list-item external"> <a href="https://brightspace.tudelft.nl/d2l/home/681612" class="nav-list-link external" target="_blank" rel="noopener noreferrer" > DI Brightspace <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li><li class="nav-list-item external"> <a href="https://hedy.org/" class="nav-list-link external" target="_blank" rel="noopener noreferrer" > Hedy - Python learning <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li><li class="nav-list-item external"> <a href="https://www.w3schools.com/python/" class="nav-list-link external" target="_blank" rel="noopener noreferrer" > W3Schools - Python <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li><li class="nav-list-item external"> <a href="https://docs.circuitpython.org/en/latest/README.html" class="nav-list-link external" target="_blank" rel="noopener noreferrer" > CircuitPython Docs <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Digital Interfaces" aria-label="Search Digital Interfaces" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/Digital-Interfaces/test/tutorials/">Tutorials</a></li> <li class="breadcrumb-nav-list-item"><span>01 Time in CircuitPython</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="dealing-with-time-in-circuit-python"> <a href="#dealing-with-time-in-circuit-python" class="anchor-heading" aria-labelledby="dealing-with-time-in-circuit-python"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Dealing with Time in Circuit Python </h1> <p>You often need to take time into account one way or another when writing programs. The <strong>Core Module</strong> called <strong>time</strong> can help us with this! It has a few more bits of functionality than I will describe here (check the documentation if you’re interested). I will focus on the most important and fundamental functions, which are also very useful for the type of thing’s you might be doing.</p> <p><strong>time.sleep(seconds_as_floating_point)</strong> <strong>[returns nothing]</strong></p> <p>This function is very easy to use and is sometimes the right approach - but often it’s not!</p> <ul> <li>This makes the processor (and hence the program) stop at that line and wait for the specified amount of time.</li> <li>This is a simple way to introduce a delay of known duration between two steps.</li> <li>Think of it like the count-down timer on your phone. When the code gets to that line, it set’s a timer for the specified time, then goes to sleep until the timer ‘beeps’, it which point it wakes up and keeps going.</li> <li>The problem is that the processor can’t do anything else (with a few exceptions, e.g. it will still detect and count pulses using <strong>countio</strong>) during this time. So it’s a waste of processor power, and prevents the program from responding to anything else during that time.</li> <li>For a sufficiently simple program the waste of time might not be an issue, and in some circumstances it’s ok that the system becomes unresponsive for a short while, so it <em>can</em> be a valid solution in some cases, particularly where very short delays are used.</li> </ul> <p><strong>time.monotonic()</strong> <strong>[returns time_in_seconds_as_floating_point]</strong> or the <strong>time.monotonic_ns() [returns time_in_nanosecons_as_long_integer]</strong></p> <p>are often a better way of doing time related stuff. But it takes a little bit more thought and coding to make use of them.</p> <p>Calling either of these functions can be thought of as consulting a stop-watch that is always running and counting up. The actual value is meaningless because the starting point is arbitrary, but that doesn’t matter if you look at the difference between two readings taken at different times.</p> <p>Difference between <strong>time.monotonic()</strong> and <strong>time.monotonic_ns()</strong></p> <p>is just down to how time is represented:</p> <ul> <li>With <strong>“time.monotonic()</strong>” you get a <strong>floating point</strong> number that represents time in <strong>seconds</strong>. Having the number in seconds is often convenient, because it’s a fairly intuitive measure of time.</li> <li>Due to the way floating point numbers are represented: an arbitrarily large number can be represented; but the precision that can be represented decreases as the number gets bigger. Initially you get precision of 1ms or better, but after an hour and a bit that will start decreasing (first to 2ms, then 4ms and so on).</li> <li>So, if you need sub-millisecond precision, or if you need millisecond precision over fairly long periods, this is not the one to use.</li> <li>With “<strong>time.monotonic_ns()</strong>” you get an <strong>integer</strong> that represents the time in <strong>nanoseconds</strong> (1 second = 1,000,000,000 nanoseconds = 1e9 nanoseconds). This is obviously a less intuitive measure of time.</li> <li>Due to the way integers are handled by Python (this is <strong>not</strong> the case in many other languages like C++), there is no specific limit to the size of number that can be represented. As the number gets bigger, more and more memory will be allocated to represent it. Of course, <em>eventually</em> the board will run out of memory, but that would take quite an extreme situation.</li> <li>So, using this approach will give you much finer time resolution that never deteriorates, but at the expense of more memory and, possibly, a slightly higher CPU load for doing the necessary sums.</li> <li>Also note: even though it represents time in nanoseconds, don’t expect to be able to use resolution that fine. The CPU is only 120MHz, so each CPU clock cycle is going to take around 10ns, and most Python commands are going to take multiple clock cycles to complete. So probably stick to microseconds or longer!</li> </ul> <p><strong>Illustrative Examples Involving Time</strong></p> <p>To illustrate these concepts, we will consider two examples: blinking an LED, and detecting a “double click” of a button. The associated programs are provided.</p> <h2 id="example-1-blink-an-led"> <a href="#example-1-blink-an-led" class="anchor-heading" aria-labelledby="example-1-blink-an-led"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example 1: Blink an LED </h2> <p>Two programs are provided, both of which make the on-board LED blink at 1Hz and 50% duty cycle (i.e. on for 500ms, off for 500ms and so on).</p> <h3 id="program-1-using-timesleep"> <a href="#program-1-using-timesleep" class="anchor-heading" aria-labelledby="program-1-using-timesleep"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Program 1: using <strong>time.sleep()</strong> </h3> <p>The first program (“LED blink using sleep.py”) does this using <strong>time.sleep()</strong>: it turns on the LED, sleeps for 500ms, turns off the LED, sleeps for 500ms and repeats. (See the detailed comments in the code for further explanation)</p> <ul> <li>This works totally fine if you just want to make one LED blink (how exciting!).</li> <li>But what if you had two LEDs that you wanted to blink at different frequencies? Or what if you simply wanted the microcontroller to do something else while the LED was blinking?</li> <li>In this case, both of those things would be impossible. The processor spends 99,9999…% of its time sleeping!</li> </ul> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Import the required libraries:
#   - board: Provides pin definitions specific to the board being used.
#   - digitalio: Provides digital input/output functionality.
#   - time: Provides time-related functions, such as sleep().
</span><span class="kn">import</span> <span class="nn">board</span>
<span class="kn">import</span> <span class="nn">digitalio</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="c1"># Create a DigitalInOut object for the onboard LED, which is connected to pin D13.
</span><span class="n">led</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">DigitalInOut</span><span class="p">(</span><span class="n">board</span><span class="p">.</span><span class="n">D13</span><span class="p">)</span>

<span class="c1"># Set the direction of the 'led' object as OUTPUT, allowing us to control the LED state.
</span><span class="n">led</span><span class="p">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">Direction</span><span class="p">.</span><span class="n">OUTPUT</span>

<span class="c1"># Start an infinite loop to repeatedly execute the code within.
</span><span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="c1"># Set the LED value to True, which turns it ON.
</span>    <span class="n">led</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="c1"># Pause the program execution for 0.5 seconds (500 milliseconds) while the LED remains ON.
</span>    <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>

    <span class="c1"># Set the LED value to False, which turns it OFF.
</span>    <span class="n">led</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="c1"># Pause the program execution for 0.5 seconds (500 milliseconds) while the LED remains OFF.
</span>    <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>

    <span class="c1"># The loop will repeat, causing the LED to blink on and off every half second.
</span></code></pre></div></div> <h3 id="program-2-using-timemonotonic"> <a href="#program-2-using-timemonotonic" class="anchor-heading" aria-labelledby="program-2-using-timemonotonic"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Program 2: using <strong>time.monotonic()</strong> </h3> <p>The second program (“LED blink using time monotonic.py”) achieves the same thing using <strong>time.monotonic()</strong>: it notes the last time it changed the LED state, keeps looping and checking the time, and changes the state again when enough time has passed (See the detailed comments in the code for further explanation)</p> <ul> <li>The resulting LED behaviour is identical to the previous example.</li> <li>In this very simple case, the processor spends 99.999…% of its time checking the ‘stopwatch’ and calculating whether enough time has passed.</li> <li><em>However</em>, the key difference is that you could add much more code inside the <strong>while</strong> loop, and it would do that between ‘stopwatch checks’. As long as that code takes much less than 500ms to execute (which would almost always be the case - it’s pretty hard to keep a microcontroller busy for 500ms without telling it to wait!), then the blinking would continue.</li> <li>See the third program (“LED blink using time monotonic multiple LEDs.py”) for an example where the program is extended to blink two LEDs at different frequencies, assuming one is connected to D1 and the other to D2.</li> </ul> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Import the required libraries:
#   - board: Provides pin definitions specific to the board being used.
#   - digitalio: Provides digital input/output functionality.
#   - time: Provides time-related functions, such as monotonic() and sleep().
</span><span class="kn">import</span> <span class="nn">board</span>
<span class="kn">import</span> <span class="nn">digitalio</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="c1"># Create a DigitalInOut object for the onboard LED, which is connected to pin D13.
</span><span class="n">led</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">DigitalInOut</span><span class="p">(</span><span class="n">board</span><span class="p">.</span><span class="n">D13</span><span class="p">)</span>

<span class="c1"># Set the direction of the 'led' object as OUTPUT, allowing us to control the LED state.
</span><span class="n">led</span><span class="p">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">Direction</span><span class="p">.</span><span class="n">OUTPUT</span>

<span class="c1"># Set the blink rate for the LED (in seconds). In this case, 0.5 seconds.
</span><span class="n">blinkRateLED</span> <span class="o">=</span> <span class="mf">0.5</span>

<span class="c1"># Initialize the LED state to False (off).
</span><span class="n">led</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="bp">False</span>

<span class="c1"># Record the current time using time.monotonic() as the last time the LED state was changed.
</span><span class="n">lastChangeTimeLED</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="n">monotonic</span><span class="p">()</span>

<span class="c1"># Start an infinite loop to repeatedly execute the code within.
</span><span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="c1"># Get the current time using time.monotonic().
</span>    <span class="n">timeNow</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="n">monotonic</span><span class="p">()</span>

    <span class="c1"># Check if the time elapsed since the last LED state change is greater than the blink rate.
</span>    <span class="k">if</span> <span class="n">timeNow</span> <span class="o">-</span> <span class="n">lastChangeTimeLED</span> <span class="o">&gt;</span> <span class="n">blinkRateLED</span><span class="p">:</span>
        <span class="c1"># Invert the LED state using the 'not' keyword.
</span>        <span class="n">led</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">led</span><span class="p">.</span><span class="n">value</span>

        <span class="c1"># Update the last LED state change time to the current time.
</span>        <span class="n">lastChangeTimeLED</span> <span class="o">=</span> <span class="n">timeNow</span>
</code></pre></div></div> <h2 id="example-2-detecting-double-click-of-a-button"> <a href="#example-2-detecting-double-click-of-a-button" class="anchor-heading" aria-labelledby="example-2-detecting-double-click-of-a-button"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example 2: Detecting “double click” of a button </h2> <p>Background information</p> <ul> <li>As an illustrative example that might also be useful at some point, here we build up to a program that can tell the difference between a “single click” and a “double click”, just like with a computer mouse.</li> <li>I prototyped this using the “Touch Sensor” module from the Connected Interaction Kit. The code could also be applied to a conventional mechanical button, but some modification might be required to address the issue of “bouncing”.</li> </ul> <p>Switch bouncing</p> <p>Switch bouncing, also known as contact bouncing, is a common issue in electronics where a mechanical switch’s contacts do not instantly make or break a connection when the switch is actuated. Instead, the contacts rapidly open and close several times before settling, causing multiple unintended transitions in the signal. This can lead to false readings or undesired behavior in digital circuits or microcontrollers interpreting the switch’s state.</p> <ul> <li>To address this issue, switch debouncing techniques, such as software-based delays or hardware-based filters, are used to ensure stable and accurate signal transitions.</li> <li>The Touch Sensor module includes hardware debouncing so it gives a very clean signal.</li> <li>We won’t go further into the issue of debouncing here, so just use the Touch Sensor for now.</li> </ul> <h3 id="program-1-most-basic-way"> <a href="#program-1-most-basic-way" class="anchor-heading" aria-labelledby="program-1-most-basic-way"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Program 1: most basic way </h3> <p>The first program (“Button basic.py”) is just included to show the most basic way to control an LED from a button. The LED mirrors the state of the button, so it’s on while you hold the button. See comments in the program for more detailed explanation.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Import the required libraries:
#   - board: Provides pin definitions specific to the board being used.
#   - digitalio: Provides digital input/output functionality.
#   - time: Provides time-related functions, such as sleep().
</span><span class="kn">import</span> <span class="nn">board</span>
<span class="kn">import</span> <span class="nn">digitalio</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="c1"># Create a DigitalInOut object for the onboard LED, which is connected to pin D13.
</span><span class="n">led</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">DigitalInOut</span><span class="p">(</span><span class="n">board</span><span class="p">.</span><span class="n">D13</span><span class="p">)</span>

<span class="c1"># Set the direction of the 'led' object as OUTPUT, allowing us to control the LED state.
</span><span class="n">led</span><span class="p">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">Direction</span><span class="p">.</span><span class="n">OUTPUT</span>

<span class="c1"># Create a DigitalInOut object for the button, connected to pin D0.
</span><span class="n">button</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">DigitalInOut</span><span class="p">(</span><span class="n">board</span><span class="p">.</span><span class="n">D0</span><span class="p">)</span>

<span class="c1"># Set the direction of the 'button' object as INPUT, allowing us to read its state.
</span><span class="n">button</span><span class="p">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">Direction</span><span class="p">.</span><span class="n">INPUT</span>

<span class="c1"># Start an infinite loop to repeatedly execute the code within.
</span><span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="c1"># Read the current button state and set the LED state to match the button state.
</span>    <span class="c1"># If the button is pressed (True), the LED will turn ON.
</span>    <span class="c1"># If the button is not pressed (False), the LED will turn OFF.
</span>    <span class="n">led</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">button</span><span class="p">.</span><span class="n">value</span>
</code></pre></div></div> <h3 id="program-2-edge-detection"> <a href="#program-2-edge-detection" class="anchor-heading" aria-labelledby="program-2-edge-detection"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Program 2: edge detection </h3> <p>The second program (“Button toggle single click.py) introduces the concept of <strong>edge detection</strong>. It specifically monitors to changes from <strong>low</strong> to <strong>high</strong> in the state of the button. Each time this occurs, it <strong>toggles</strong> the state of the LED (i.e. turns it on if it was off and vice versa). Again, this is explained in more detail in the comments in the code.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Import the required libraries:
#   - board: Provides pin definitions specific to the board being used.
#   - digitalio: Provides digital input/output functionality.
#   - time: Provides time-related functions, such as sleep().
</span><span class="kn">import</span> <span class="nn">board</span>
<span class="kn">import</span> <span class="nn">digitalio</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="c1"># Create a DigitalInOut object for the onboard LED, which is connected to pin D13.
</span><span class="n">led</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">DigitalInOut</span><span class="p">(</span><span class="n">board</span><span class="p">.</span><span class="n">D13</span><span class="p">)</span>

<span class="c1"># Set the direction of the 'led' object as OUTPUT, allowing us to control the LED state.
</span><span class="n">led</span><span class="p">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">Direction</span><span class="p">.</span><span class="n">OUTPUT</span>

<span class="c1"># Create a DigitalInOut object for the button, connected to pin D0.
</span><span class="n">button</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">DigitalInOut</span><span class="p">(</span><span class="n">board</span><span class="p">.</span><span class="n">D0</span><span class="p">)</span>

<span class="c1"># Set the direction of the 'button' object as INPUT, allowing us to read its state.
</span><span class="n">button</span><span class="p">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">Direction</span><span class="p">.</span><span class="n">INPUT</span>

<span class="c1"># Initialize variables to store the last button state and the current LED state.
</span><span class="n">lastButton</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">LEDstate</span> <span class="o">=</span> <span class="bp">False</span>

<span class="c1"># Start an infinite loop to repeatedly execute the code within.
</span><span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="c1"># Read the current button state and store it in the newButton variable.
</span>    <span class="n">newButton</span> <span class="o">=</span> <span class="n">button</span><span class="p">.</span><span class="n">value</span>

    <span class="c1"># Check for a rising edge (change from low to high) on the button input.
</span>    <span class="k">if</span> <span class="n">newButton</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">lastButton</span><span class="p">:</span>
        <span class="c1"># If a rising edge is detected, toggle the LED state using the 'not' keyword.
</span>        <span class="n">LEDstate</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">LEDstate</span>

    <span class="c1"># Update the last button state to the current button state.
</span>    <span class="n">lastButton</span> <span class="o">=</span> <span class="n">newButton</span>

    <span class="c1"># Set the LED state according to the value of LEDstate.
</span>    <span class="n">led</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">LEDstate</span>
</code></pre></div></div> <h3 id="program-3-button-toggle-using-time-module"> <a href="#program-3-button-toggle-using-time-module" class="anchor-heading" aria-labelledby="program-3-button-toggle-using-time-module"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Program 3: button toggle using <strong>time module</strong> </h3> <p>Finally, the third program (“Button toggle only on double click.py”) uses the <strong>time</strong> module (specifically the <strong>time.monotonic()</strong> function) to differentiate between a “double click” (two clicks in sufficiently quick succession – 250ms in the provided code) and one or more “single clicks”. It only toggles the LED state on a double click, but it prints “Single Click” or “Double Click” to the serial monitor. If you were using this as part of a larger program, you could do different actions on the single and double clicks. This one is fairly complicated, but the comments in the code explain in detail.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Import the required libraries:
</span><span class="kn">import</span> <span class="nn">board</span>
<span class="kn">import</span> <span class="nn">digitalio</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="c1"># Create a DigitalInOut object for the onboard LED, connected to pin D13.
</span><span class="n">led</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">DigitalInOut</span><span class="p">(</span><span class="n">board</span><span class="p">.</span><span class="n">D13</span><span class="p">)</span>
<span class="n">led</span><span class="p">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">Direction</span><span class="p">.</span><span class="n">OUTPUT</span>  <span class="c1"># Set LED as output
</span>
<span class="c1"># Create a DigitalInOut object for the button, connected to pin D0.
</span><span class="n">button</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">DigitalInOut</span><span class="p">(</span><span class="n">board</span><span class="p">.</span><span class="n">D0</span><span class="p">)</span>
<span class="n">button</span><span class="p">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">Direction</span><span class="p">.</span><span class="n">INPUT</span>  <span class="c1"># Set button as input
</span>
<span class="c1"># Initialize variables to track button and LED state, as well as click detection
</span><span class="n">lastButton</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">LEDstate</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">oneClick</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">clickTime</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">doubleClickWindow</span> <span class="o">=</span> <span class="mf">0.25</span>  <span class="c1"># Time window for double-click detection (in seconds)
</span>
<span class="c1"># Start an infinite loop to repeatedly execute the code within.
</span><span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="n">newButton</span> <span class="o">=</span> <span class="n">button</span><span class="p">.</span><span class="n">value</span>  <span class="c1"># Read the current button state
</span>
    <span class="c1"># Check for a rising edge (change from low to high) on the button input.
</span>    <span class="k">if</span> <span class="n">newButton</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">lastButton</span><span class="p">:</span>
        <span class="c1"># If this is the first click, set oneClick to True and save the current time.
</span>        <span class="k">if</span> <span class="ow">not</span> <span class="n">oneClick</span><span class="p">:</span>
            <span class="n">oneClick</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="n">clickTime</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="n">monotonic</span><span class="p">()</span>
        <span class="c1"># If oneClick is already True, a second click has been detected within the time window.
</span>        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"Double Click"</span><span class="p">)</span>  <span class="c1"># Detected a double-click
</span>            <span class="n">oneClick</span> <span class="o">=</span> <span class="bp">False</span>  <span class="c1"># Reset oneClick for future click detection
</span>            <span class="n">LEDstate</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">LEDstate</span>  <span class="c1"># Toggle the LED state (if ON, turn OFF; if OFF, turn ON)
</span>
    <span class="c1"># Update the last button state to the current button state.
</span>    <span class="n">lastButton</span> <span class="o">=</span> <span class="n">newButton</span>

    <span class="c1"># Check if the time since the first click has exceeded the double-click window
</span>    <span class="c1"># and oneClick is still True (meaning a second click has not been detected).
</span>    <span class="k">if</span> <span class="n">time</span><span class="p">.</span><span class="n">monotonic</span><span class="p">()</span> <span class="o">-</span> <span class="n">clickTime</span> <span class="o">&gt;</span> <span class="n">doubleClickWindow</span> <span class="ow">and</span> <span class="n">oneClick</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"Single Click"</span><span class="p">)</span>  <span class="c1"># Detected a single-click
</span>        <span class="n">oneClick</span> <span class="o">=</span> <span class="bp">False</span>  <span class="c1"># Reset oneClick for future click detection
</span>
    <span class="c1"># Set the LED state according to the value of LEDstate.
</span>    <span class="n">led</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">LEDstate</span>
</code></pre></div></div> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
