<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/Digital-Interfaces/test/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/Digital-Interfaces/test/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li:not(:nth-child(5)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(2) > ul > li:nth-child(5) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(2) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(2) > ul > li:nth-child(5) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(2) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(2) > ul.nav-list > li.nav-list-item:nth-child(5) > ul.nav-list { display: block; } </style> <script src="/Digital-Interfaces/test/assets/js/vendor/lunr.min.js"></script> <script src="/Digital-Interfaces/test/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>5: Walkie-Talkie - Hardware and Code | Digital Interfaces</title> <meta name="generator" content="Jekyll v3.10.0" /> <meta property="og:title" content="5: Walkie-Talkie - Hardware and Code" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Repository for the BSc course Digital Interfaces" /> <meta property="og:description" content="Repository for the BSc course Digital Interfaces" /> <meta property="og:site_name" content="Digital Interfaces" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="5: Walkie-Talkie - Hardware and Code" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Repository for the BSc course Digital Interfaces","headline":"5: Walkie-Talkie - Hardware and Code","url":"/Digital-Interfaces/test/assignments/05-walkie-talkie-hw-code/"}</script> <!-- End Jekyll SEO tag --> <!-- CSS and JS for jekyll-tabs --> <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jekyll-tabs@1.1.0/dist/tabs.css"> --> <!-- <script type="text/javascript" src="/assets/js/tabs.js"></script> --> <script src="/Digital-Interfaces/test/assets/js/tabs.js" type="text/javascript"></script> <link rel="stylesheet" href="/Digital-Interfaces/test/assets/css/tabs.css"> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <header class="side-bar"> <div class="site-header"> <a href="/Digital-Interfaces/test/" class="site-title lh-tight"> Digital Interfaces </a> <button id="menu-button" class="site-button btn-reset" aria-label="Menu" aria-expanded="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/" class="nav-list-link">Home</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Assignments submenu" aria-expanded="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/assignments/" class="nav-list-link">Assignments</a><ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/01-reaction-game-hw-code/" class="nav-list-link">1: Reaction Game - Hardware and Code</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/02-reaction-game-embodiment/" class="nav-list-link">2: Reaction Game - Embodiment</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/03-game-controller-hw-code/" class="nav-list-link">3: Game Controller - Hardware and Code</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/04-game-controller-embodiment/" class="nav-list-link">4: Game Controller Embodiment</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/05-walkie-talkie-hw-code/" class="nav-list-link">5: Walkie-Talkie - Hardware and Code</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/06-walkie-talkie-embodiment/" class="nav-list-link">6: Walkie-Talkie - Embodiment</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="7+8: Animistic Design submenu" aria-expanded="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/" class="nav-list-link">7+8: Animistic Design</a><ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/varspeed-library-guide.html" class="nav-list-link">VarSpeed Library Guide</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Fading and blinking a Chainable LED submenu" aria-expanded="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/fading-and-blinking-a-chainable-led-index.html" class="nav-list-link">Fading and blinking a Chainable LED</a><ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/fading-and-blinking-a-chainable-led/neopixel.html" class="nav-list-link">Chainable LED ChaiNEO</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/fading-and-blinking-a-chainable-led/p9813.html" class="nav-list-link">Chainable LED P9813</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Running two sequences simultaneously submenu" aria-expanded="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/running-two-sequences-index.html" class="nav-list-link">Running two sequences simultaneously</a><ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/running-two-sequences/neopixel.html" class="nav-list-link">Chainable LED ChaiNEO</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/running-two-sequences/p9813.html" class="nav-list-link">Chainable LED P9813</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Triggering different sequences based on context or interaction submenu" aria-expanded="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/trigger-different-sequences-index.html" class="nav-list-link">Triggering different sequences based on context or interaction</a><ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/trigger-different-sequences/neopixel.html" class="nav-list-link">Chainable LED ChaiNEO</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/trigger-different-sequences/p9813.html" class="nav-list-link">Chainable LED P9813</a></li></ul></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Tutorials submenu" aria-expanded="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/" class="nav-list-link">Tutorials</a><ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/tutorials/01-time/" class="nav-list-link">01 Time in CircuitPython</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="02 Pomodoro submenu" aria-expanded="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/" class="nav-list-link">02 Pomodoro</a><ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step1.html" class="nav-list-link">Step 1: Preparation</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Step 2: Setting up the states submenu" aria-expanded="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step2.html" class="nav-list-link">Step 2: Setting up the states</a><ul class="nav-list"></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Step 3: Adding the LED submenu" aria-expanded="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step3.html" class="nav-list-link">Step 3: Adding the LED</a><ul class="nav-list"></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Step 4: Creating a timer submenu" aria-expanded="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step4.html" class="nav-list-link">Step 4: Creating a timer</a><ul class="nav-list"></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Step 5: Adding an alarm submenu" aria-expanded="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step5.html" class="nav-list-link">Step 5: Adding an alarm</a><ul class="nav-list"></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Step 6: Adding the breaks submenu" aria-expanded="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step6.html" class="nav-list-link">Step 6: Adding the breaks</a><ul class="nav-list"></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Step 7: Additional visualization using the servo submenu" aria-expanded="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step7.html" class="nav-list-link">Step 7: Additional visualization using the servo</a><ul class="nav-list"></ul></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step8.html" class="nav-list-link">Step 8 Assembling the embodiment</a></li></ul></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/tutorials/coding-challenge/" class="nav-list-link">Coding Challenge</a></li></ul></li></ul> <ul class="nav-list"><li class="nav-list-item external"> <a href="https://id-studiolab.github.io/Connected-Interaction-Kit" class="nav-list-link external" target="_blank" rel="noopener noreferrer" > Connected Interaction Kit <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li><li class="nav-list-item external"> <a href="https://brightspace.tudelft.nl/d2l/home/681612" class="nav-list-link external" target="_blank" rel="noopener noreferrer" > DI Brightspace <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li><li class="nav-list-item external"> <a href="https://hedy.org/" class="nav-list-link external" target="_blank" rel="noopener noreferrer" > Hedy - Python learning <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li><li class="nav-list-item external"> <a href="https://www.w3schools.com/python/" class="nav-list-link external" target="_blank" rel="noopener noreferrer" > W3Schools - Python <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li><li class="nav-list-item external"> <a href="https://docs.circuitpython.org/en/latest/README.html" class="nav-list-link external" target="_blank" rel="noopener noreferrer" > CircuitPython Docs <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li></ul> </nav> <div class="d-md-block d-xs-none"> <div class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </div> </div> </header> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Digital Interfaces" autocomplete="off"> <label for="search-input" class="search-label"> <span class="sr-only">Search Digital Interfaces</span> <svg viewBox="0 0 24 24" class="search-icon" aria-hidden="true"><use xlink:href="#svg-search"></use></svg> </label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/Digital-Interfaces/test/assignments/">Assignments</a></li> <li class="breadcrumb-nav-list-item"><span>5: Walkie-Talkie - Hardware and Code</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="walkie-talkie---hardware-and-code"> <a href="#walkie-talkie---hardware-and-code" class="anchor-heading" aria-labelledby="walkie-talkie---hardware-and-code"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Walkie-Talkie - Hardware and Code </h1> <p>This week you’ll build a small device that can send messages to someone else’s device. The message can be as simple as a single buzz, or something more structured—like a sequence in <a href="https://en.wikipedia.org/wiki/Morse_code">Morse code</a>. We’ll use <a href="https://mqtt.org/">MQTT</a> (a lightweight messaging protocol commonly used in Internet of Things projects) to send your message to a server. Once your message is published to the server, someone else can subscribe to your topic and receive it on their device.</p> <p>What you’ll do</p> <ul> <li>Publish a message from your device to an MQTT broker (server)</li> <li>Subscribe to someone else’s topic to receive their messages</li> <li>Design a message format (e.g., short buzz patterns or Morse-like timing)</li> </ul><hr /> <h2 id="before-we-begin"> <a href="#before-we-begin" class="anchor-heading" aria-labelledby="before-we-begin"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Before we begin </h2> <p>For this week’s assignment, we prepared a lot of different code snippets to help you along. They are meant for you to use and <strong>modify</strong> for your specific design and device. Simple copy+pasting without a rough understanding of what you are copying <strong>will not work!</strong></p> <p>Although we will use a lot of code, you are not required to understand every little line, but rather analyse your needs and search for the specific code sample.</p> <p class="warning">As a prerequisite for this tutorial to work, make sure you followed and successfully completed <a href="https://id-studiolab.github.io/Connected-Interaction-Kit/test/tutorials/03-connect-to-the-internet/">Tutorial 4 of the Connected Interaction Kit website</a> and connected your ItsyBitsy to the internet.</p> <p>After connecting to the internet the next step is to connect to the MQTT server.</p> <p><a href="step-1" class="btn btn-blue">Get started</a></p> <h2 id="coding-instructions"> <a href="#coding-instructions" class="anchor-heading" aria-labelledby="coding-instructions"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Coding Instructions </h2> <p>In this assignment you will learn how to publish data to an MQTT topic and revise last week’s assignment on how to process received data.</p> <p>When connected to an MQTT server, we can not only listen to a topic (e.g. “perlin” and “iss/distance” from last week), but also send data to it! Sending data to the MQTT broker is called “publishing” and when doing so, all devices which are connected to the topic you’re sending information to will receive the data you send.</p> <blockquote class="attention"> <p>If you didn’t complete last week’s assignment, you should make sure you have done the following things before starting with this assignment:</p> <ul> <li>Follow the tutorial on how to connect your board to TUD-facility wifi <a href="https://id-studiolab.github.io/Connected-Interaction-Kit/tutorials/03-connect-to-the-internet/">here</a>.</li> <li>Download the MQTT wrapper <a href="../04-data-embodiment/MQTT.zip">here</a> and put it in your <code class="language-plaintext highlighter-rouge">lib</code> folder.</li> <li>Create a <code class="language-plaintext highlighter-rouge">settings.py</code> file like the one shown in <a href="../04-data-embodiment/step-1.md">step 1 - 4: Data Embodiment</a> and add the wifi credentials.</li> </ul> </blockquote><hr /> <h2 id="coding-assignment"> <a href="#coding-assignment" class="anchor-heading" aria-labelledby="coding-assignment"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Coding Assignment </h2> <p>Your goal is to implement 2 buttons and an actuator of your choice (we recommend either a piezo buzzer or a vibration motor), in the following way:</p> <ul> <li>1 button dedicated to opening the walkie-talkie channel</li> <li>1 button to send messages on the channel</li> <li>1 actuator that is triggered when a message is received</li> </ul> <p><strong>Remember that walkie-talkies cannot receive messages while their channel is open.</strong></p> <p>Just like last week, here below we present a template with <strong>almost</strong> everything you need to make your walkie-talkie work.</p> <p>Although, one crucial part is <strong>missing</strong>, the part inside the <code class="language-plaintext highlighter-rouge">while</code> loop, you should use the acting machine diagram below the code to make your walkie-talkie work.</p> <p>Happy coding!</p> <h3 id="code-template"> <a href="#code-template" class="anchor-heading" aria-labelledby="code-template"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Code template </h3> <ul id="data-struct" class="tab" data-tab="fa2006c1-772b-4e61-8e2f-f6df8218b8a1" data-name="data-struct"> <li class="active" id="data-struct-picoexpander"> <a href="#">PicoExpander </a> </li> <li id="data-struct-bitsyexpander"> <a href="#">BitsyExpander </a> </li> </ul> <ul class="tab-content" id="fa2006c1-772b-4e61-8e2f-f6df8218b8a1" data-name="data-struct"> <li class="active"> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">##--- Library Imports
</span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">digitalio</span>
<span class="kn">import</span> <span class="nn">board</span>
<span class="kn">import</span> <span class="nn">neopixel</span>

<span class="kn">from</span> <span class="nn">MQTT</span> <span class="kn">import</span> <span class="n">Create_MQTT</span>
<span class="kn">from</span> <span class="nn">settings</span> <span class="kn">import</span> <span class="n">settings</span>

<span class="c1">##--- Defining states
</span><span class="n">state_idle</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">state_receive</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">state_channel_open</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">state_transmit</span> <span class="o">=</span> <span class="mi">3</span>

<span class="n">current_state</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1"># Define variable to save data received from the MQTT broker
</span><span class="n">last_received_value</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1">##--- Button variables
</span><span class="n">open_channel_pin</span> <span class="o">=</span> <span class="n">board</span><span class="p">.</span><span class="n">GP6</span>
<span class="n">open_channel_button</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">DigitalInOut</span><span class="p">(</span><span class="n">open_channel_pin</span><span class="p">)</span>
<span class="n">open_channel_button</span><span class="p">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">Direction</span><span class="p">.</span><span class="n">INPUT</span>

<span class="n">speak_channel_pin</span> <span class="o">=</span> <span class="n">board</span><span class="p">.</span><span class="n">GP8</span>
<span class="n">speak_button</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">DigitalInOut</span><span class="p">(</span><span class="n">speak_channel_pin</span><span class="p">)</span>
<span class="n">speak_button</span><span class="p">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">Direction</span><span class="p">.</span><span class="n">INPUT</span>

<span class="c1">##-- Led variables
</span><span class="n">pin_leds</span> <span class="o">=</span> <span class="n">board</span><span class="p">.</span><span class="n">GP10</span>
<span class="n">num_leds</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">leds</span> <span class="o">=</span> <span class="n">neopixel</span><span class="p">.</span><span class="n">NeoPixel</span><span class="p">(</span><span class="n">pin_leds</span><span class="p">,</span> <span class="n">num_leds</span><span class="p">,</span> <span class="n">auto_write</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">pixel_order</span><span class="o">=</span><span class="n">neopixel</span><span class="p">.</span><span class="n">GRBW</span><span class="p">)</span>

<span class="n">led_off</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">led_red</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">led_blue</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">led_green</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">led_white</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">set_led_color</span><span class="p">(</span><span class="n">color</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">leds</span>
    <span class="n">leds</span><span class="p">.</span><span class="n">fill</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
    <span class="n">leds</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1">##--- Actuator variables
</span><span class="n">actuator</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">DigitalInOut</span><span class="p">(</span><span class="n">board</span><span class="p">.</span><span class="n">GP12</span><span class="p">)</span>
<span class="n">actuator</span><span class="p">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">Direction</span><span class="p">.</span><span class="n">OUTPUT</span>

<span class="c1"># For more information on how to use PWM check this link: 
# https://id-studiolab.github.io/Connected-Interaction-Kit/components/piezo-buzzer/piezo-buzzer.html#define-a-tone-using-pulse-width-modulation-pwm
</span>
<span class="c1">#actuator = pwmio.PWMOut(board.GP14, variable_frequency=True)
</span>
<span class="c1">##--- MQTT configuration
</span>
<span class="c1"># Define variable to save data received from the MQTT broker
</span><span class="n">last_received_value</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">device_has_received_new_value</span> <span class="o">=</span> <span class="bp">False</span>
   
<span class="c1"># Method used when the board receives a message from the MQTT server.
</span><span class="k">def</span> <span class="nf">handle_message</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">topic</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">last_received_value</span>
    <span class="k">global</span> <span class="n">device_has_received_new_value</span>

    <span class="c1"># Assign message received to last_received variable
</span>    <span class="n">last_received_value</span> <span class="o">=</span> <span class="n">msg</span>

    <span class="n">device_has_received_new_value</span> <span class="o">=</span> <span class="bp">True</span>


<span class="c1"># You can find the client Id in the settings.py this is used to identify the board
</span><span class="n">client_id</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s">"mqtt_clientid"</span><span class="p">]</span>

<span class="c1"># Create a mqtt connection based on the settings file.
</span><span class="n">mqtt_client</span> <span class="o">=</span> <span class="n">Create_MQTT</span><span class="p">(</span><span class="n">client_id</span><span class="p">,</span> <span class="n">handle_message</span><span class="p">)</span>



<span class="c1"># &lt;--------------------------------------------&gt;
# -- DEFINE YOUR SPEAK AND LISTEN TOPIC HERE --
# VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV
</span>

<span class="c1"># Here you should select the topic of the person you want to talk to.
# Write the topic you want to send messages to.
</span><span class="n">mqtt_speak_topic</span> <span class="o">=</span> <span class="s">"Studio05-Lisa-WalkieTalkie"</span>

<span class="c1"># You should set as "listen_topic" their "speak_topic" and vice-versa
</span><span class="n">mqtt_listen_topic</span> <span class="o">=</span> <span class="s">"Studio05-Bram-WalkieTalkie"</span>


<span class="c1"># ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
# &lt;--------------------------------------------&gt;
</span>


<span class="c1"># Listen for messages on the topic specified above
</span><span class="n">mqtt_client</span><span class="p">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">mqtt_listen_topic</span><span class="p">)</span>

<span class="c1">##--- Main loop
</span><span class="k">while</span> <span class="bp">True</span><span class="p">:</span> 
    <span class="k">try</span><span class="p">:</span>
        <span class="n">mqtt_client</span><span class="p">.</span><span class="n">loop</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>

    <span class="k">except</span> <span class="p">(</span><span class="nb">ValueError</span><span class="p">,</span> <span class="nb">RuntimeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"Failed to get data, retrying</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
        <span class="n">mqtt_client</span><span class="p">.</span><span class="n">reconnect</span><span class="p">()</span>
        <span class="k">continue</span>
    <span class="c1"># ---------------------------------------------
</span>    <span class="c1"># ^ DO NOT CHANGE ANYTHING ABOVE THIS POINT ^ |
</span>    <span class="c1"># ---------------------------------------------
</span>
    <span class="n">message</span> <span class="o">=</span> <span class="s">"ping"</span>

    <span class="c1"># Use this method to publish messages on a topic:
</span>    <span class="c1"># mqtt_client.publish(mqtt_speak_topic, message)
</span>
    <span class="c1"># ----------------------------------------------------------------|
</span>    <span class="c1">#                                                                 |
</span>    <span class="c1"># Use the Acting Machine Diagram to program your solution here    |
</span>    <span class="c1">#                                                                 |
</span>    <span class="c1"># Hint: Use of the "device_has_received_new_value" variable       |
</span>    <span class="c1">#       Use the open_channel_button and speak_button variables    |
</span>    <span class="c1">#       Use the led variable (copied from the reation game code)  |
</span>    <span class="c1"># ----------------------------------------------------------------|
</span>


    <span class="c1"># ----------------------------------------------
</span>    <span class="c1"># v DO NOT CHANGE ANYTHING BELOW THIS POINT v  |
</span>    <span class="c1"># ----------------------------------------------
</span>    <span class="n">device_has_received_new_value</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
</code></pre></div></div> </li> <li> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">##--- Library Imports
</span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">digitalio</span>
<span class="kn">import</span> <span class="nn">board</span>
<span class="kn">import</span> <span class="nn">neopixel</span>

<span class="kn">from</span> <span class="nn">MQTT</span> <span class="kn">import</span> <span class="n">Create_MQTT</span>
<span class="kn">from</span> <span class="nn">settings</span> <span class="kn">import</span> <span class="n">settings</span>

<span class="c1">##--- Defining states
</span><span class="n">state_idle</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">state_receive</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">state_channel_open</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">state_transmit</span> <span class="o">=</span> <span class="mi">3</span>

<span class="n">current_state</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1"># Define variable to save data received from the MQTT broker
</span><span class="n">last_received_value</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1">##--- Button variables
</span><span class="n">open_channel_pin</span> <span class="o">=</span> <span class="n">board</span><span class="p">.</span><span class="n">D13</span>
<span class="n">open_channel_button</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">DigitalInOut</span><span class="p">(</span><span class="n">open_channel_pin</span><span class="p">)</span>
<span class="n">open_channel_button</span><span class="p">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">Direction</span><span class="p">.</span><span class="n">INPUT</span>

<span class="n">speak_channel_pin</span> <span class="o">=</span> <span class="n">board</span><span class="p">.</span><span class="n">D7</span>
<span class="n">speak_button</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">DigitalInOut</span><span class="p">(</span><span class="n">speak_channel_pin</span><span class="p">)</span>
<span class="n">speak_button</span><span class="p">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">Direction</span><span class="p">.</span><span class="n">INPUT</span>

<span class="c1">##-- Led variables
</span><span class="n">pin_leds</span> <span class="o">=</span> <span class="n">board</span><span class="p">.</span><span class="n">D3</span>
<span class="n">num_leds</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">leds</span> <span class="o">=</span> <span class="n">neopixel</span><span class="p">.</span><span class="n">NeoPixel</span><span class="p">(</span><span class="n">pin_leds</span><span class="p">,</span> <span class="n">num_leds</span><span class="p">,</span> <span class="n">auto_write</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">pixel_order</span><span class="o">=</span><span class="n">neopixel</span><span class="p">.</span><span class="n">GRBW</span><span class="p">)</span>

<span class="n">led_off</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">led_red</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">led_blue</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">led_green</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">led_white</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">set_led_color</span><span class="p">(</span><span class="n">color</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">leds</span>
    <span class="n">leds</span><span class="p">.</span><span class="n">fill</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
    <span class="n">leds</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1">##--- Actuator variables
</span><span class="n">actuator</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">DigitalInOut</span><span class="p">(</span><span class="n">board</span><span class="p">.</span><span class="n">D4</span><span class="p">)</span>
<span class="n">actuator</span><span class="p">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">Direction</span><span class="p">.</span><span class="n">OUTPUT</span>

<span class="c1"># For more information on how to use PWM check this link: 
# https://id-studiolab.github.io/Connected-Interaction-Kit/components/piezo-buzzer/piezo-buzzer.html#define-a-tone-using-pulse-width-modulation-pwm
</span>
<span class="c1">#actuator = pwmio.PWMOut(board.D4, variable_frequency=True)
</span>
<span class="c1">##--- MQTT configuration
</span>
<span class="c1"># Define variable to save data received from the MQTT broker
</span><span class="n">last_received_value</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">device_has_received_new_value</span> <span class="o">=</span> <span class="bp">False</span>
   
<span class="c1"># Method used when the board receives a message from the MQTT server.
</span><span class="k">def</span> <span class="nf">handle_message</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">topic</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">last_received_value</span>
    <span class="k">global</span> <span class="n">device_has_received_new_value</span>

    <span class="c1"># Assign message received to last_received variable
</span>    <span class="n">last_received_value</span> <span class="o">=</span> <span class="n">msg</span>

    <span class="n">device_has_received_new_value</span> <span class="o">=</span> <span class="bp">True</span>


<span class="c1"># You can find the client Id in the settings.py this is used to identify the board
</span><span class="n">client_id</span> <span class="o">=</span> <span class="n">settings</span><span class="p">[</span><span class="s">"mqtt_clientid"</span><span class="p">]</span>

<span class="c1"># Create a mqtt connection based on the settings file.
</span><span class="n">mqtt_client</span> <span class="o">=</span> <span class="n">Create_MQTT</span><span class="p">(</span><span class="n">client_id</span><span class="p">,</span> <span class="n">handle_message</span><span class="p">)</span>



<span class="c1"># &lt;--------------------------------------------&gt;
# -- DEFINE YOUR SPEAK AND LISTEN TOPIC HERE --
# VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV
</span>

<span class="c1"># Here you should select the topic of the person you want to talk to.
# Write the topic you want to send messages to.
</span><span class="n">mqtt_speak_topic</span> <span class="o">=</span> <span class="s">"Studio05-Lisa-WalkieTalkie"</span>

<span class="c1"># You should set as "listen_topic" their "speak_topic" and vice-versa
</span><span class="n">mqtt_listen_topic</span> <span class="o">=</span> <span class="s">"Studio05-Bram-WalkieTalkie"</span>


<span class="c1"># ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
# &lt;--------------------------------------------&gt;
</span>


<span class="c1"># Listen for messages on the topic specified above
</span><span class="n">mqtt_client</span><span class="p">.</span><span class="n">subscribe</span><span class="p">(</span><span class="n">mqtt_listen_topic</span><span class="p">)</span>

<span class="c1">##--- Main loop
</span><span class="k">while</span> <span class="bp">True</span><span class="p">:</span> 
    <span class="k">try</span><span class="p">:</span>
        <span class="n">mqtt_client</span><span class="p">.</span><span class="n">loop</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>

    <span class="k">except</span> <span class="p">(</span><span class="nb">ValueError</span><span class="p">,</span> <span class="nb">RuntimeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"Failed to get data, retrying</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
        <span class="n">mqtt_client</span><span class="p">.</span><span class="n">reconnect</span><span class="p">()</span>
        <span class="k">continue</span>
    <span class="c1"># ---------------------------------------------
</span>    <span class="c1"># ^ DO NOT CHANGE ANYTHING ABOVE THIS POINT ^ |
</span>    <span class="c1"># ---------------------------------------------
</span>
    <span class="n">message</span> <span class="o">=</span> <span class="s">"ping"</span>

    <span class="c1"># Use this method to publish messages on a topic:
</span>    <span class="c1"># mqtt_client.publish(mqtt_speak_topic, message)
</span>
    <span class="c1"># ----------------------------------------------------------------|
</span>    <span class="c1">#                                                                 |
</span>    <span class="c1"># Use the Acting Machine Diagram to program your solution here    |
</span>    <span class="c1">#                                                                 |
</span>    <span class="c1"># Hint: Use of the "device_has_received_new_value" variable       |
</span>    <span class="c1">#       Use the open_channel_button and speak_button variables    |
</span>    <span class="c1">#       Use the led variable (copied from the reation game code)  |
</span>    <span class="c1"># ----------------------------------------------------------------|
</span>


    <span class="c1"># ----------------------------------------------
</span>    <span class="c1"># v DO NOT CHANGE ANYTHING BELOW THIS POINT v  |
</span>    <span class="c1"># ----------------------------------------------
</span>    <span class="n">device_has_received_new_value</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
</code></pre></div></div> </li> </ul> <div class="table-wrapper"><table> <thead> <tr> <th>Acting Machine Diagram</th> </tr> </thead> <tbody> <tr> <td><img src="/Digital-Interfaces/test/assignments/05-walkie-talkie-hw-code/walkie_talkie_state_diagram.png" alt="" /></td> </tr> </tbody> </table></div> <h2 id="understanding-speak-and-listen-topics"> <a href="#understanding-speak-and-listen-topics" class="anchor-heading" aria-labelledby="understanding-speak-and-listen-topics"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Understanding Speak and Listen Topics </h2> <p>In the code, you’ll find two variables called <code class="language-plaintext highlighter-rouge">mqtt_speak_topic</code> and <code class="language-plaintext highlighter-rouge">mqtt_listen_topic</code>. You can use them to establish communication between walkie-talkies.</p> <p><strong>Speak Topic</strong> = where you send messages<br /> <strong>Listen Topic</strong> = where you receive messages</p> <p>For two devices to communicate:</p> <ul> <li>Your speak topic must be your partner’s listen topic</li> <li>Your listen topic must be your partner’s speak topic</li> </ul> <p><strong>Example:</strong></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Your Device:
- Speak Topic: "Studio05-YourName-WalkieTalkie"
- Listen Topic: "Studio05-PartnerName-WalkieTalkie"

Partner's Device:
- Speak Topic: "Studio05-PartnerName-WalkieTalkie"
- Listen Topic: "Studio05-YourName-WalkieTalkie"
</code></pre></div></div> <p>Note: Topics must match exactly, including capitalization!</p><hr /> <h2 id="extra-challenge-interpret-received-messages"> <a href="#extra-challenge-interpret-received-messages" class="anchor-heading" aria-labelledby="extra-challenge-interpret-received-messages"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Extra Challenge: Interpret received messages </h2> <p>In the current assignment, your walkie-talkie sends a fixed message (“ping”) each time you press the button. But real communication isn’t just about sending the same thing over and over; messages can carry different meanings!</p> <p>For this challenge, modify your code so that different messages can be sent instead of always sending “ping”. Think about the different ways in which you could send different messages, for example, assign two buttons or create a switch to select messages before sending.</p> <p>When receiving messages, be sure that your walkie-talkie also interprets incoming messages and responds differently based on their content.</p> <p>Think about how this could enhance the interaction, different messages could trigger different responses from the actuator, maybe also triggering different actuators.</p> <p>Push yourself to explore how MQTT can be used for more dynamic communication!</p> <p>Here below we provide a more advanced acting machine digram to help you create your improved walkie-talkie</p> <div class="table-wrapper"><table> <thead> <tr> <th>Acting Machine Diagram</th> </tr> </thead> <tbody> <tr> <td><img src="/Digital-Interfaces/test/assignments/05-walkie-talkie-hw-code/walkie_talkie_extra_challenge_state_diagram.png" alt="" /></td> </tr> </tbody> </table></div> </main> <hr> <footer> <div class="d-xs-block d-md-none"> <div class="mt-4 fs-2"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </div> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
