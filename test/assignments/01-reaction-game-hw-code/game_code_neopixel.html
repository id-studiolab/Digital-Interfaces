<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/Digital-Interfaces/test/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/Digital-Interfaces/test/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav ul li a { background-image: none; } </style> <script src="/Digital-Interfaces/test/assets/js/vendor/lunr.min.js"></script> <script src="/Digital-Interfaces/test/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Game code for ChaiNEO | Digital Interfaces</title> <meta name="generator" content="Jekyll v3.10.0" /> <meta property="og:title" content="Game code for ChaiNEO" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Repository for the BSc course Digital Interfaces" /> <meta property="og:description" content="Repository for the BSc course Digital Interfaces" /> <meta property="og:site_name" content="Digital Interfaces" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Game code for ChaiNEO" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Repository for the BSc course Digital Interfaces","headline":"Game code for ChaiNEO","url":"/Digital-Interfaces/test/assignments/01-reaction-game-hw-code/game_code_neopixel.html"}</script> <!-- End Jekyll SEO tag --> <!-- CSS and JS for jekyll-tabs --> <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jekyll-tabs@1.1.0/dist/tabs.css"> --> <!-- <script type="text/javascript" src="/assets/js/tabs.js"></script> --> <script src="/Digital-Interfaces/test/assets/js/tabs.js" type="text/javascript"></script> <link rel="stylesheet" href="/Digital-Interfaces/test/assets/css/tabs.css"> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/Digital-Interfaces/test/" class="site-title lh-tight"> Digital Interfaces </a> <button id="menu-button" class="site-button btn-reset" aria-label="Menu" aria-expanded="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/" class="nav-list-link">Home</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Assignments submenu" aria-expanded="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/assignments/" class="nav-list-link">Assignments</a><ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/01-reaction-game-hw-code/" class="nav-list-link">1: Reaction Game - Hardware and Code</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/02-reaction-game-embodiment/" class="nav-list-link">2: Reaction Game - Embodiment</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/03-game-controller-hw-code/" class="nav-list-link">3: Game Controller - Hardware and Code</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/04-game-controller-embodiment/" class="nav-list-link">4: Game Controller Embodiment</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/05-walkie-talkie-hw-code/" class="nav-list-link">5: Walkie-Talkie - Hardware and Code</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/06-walkie-talkie-embodiment/" class="nav-list-link">6: Walkie-Talkie - Embodiment</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="7+8: Animistic Design submenu" aria-expanded="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/" class="nav-list-link">7+8: Animistic Design</a><ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/varspeed-library-guide.html" class="nav-list-link">VarSpeed Library Guide</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/fading-and-blinking-a-chainable-led-index.html" class="nav-list-link">Fading and blinking a Chainable LED</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/running-two-sequences-index.html" class="nav-list-link">Running two sequences simultaneously</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/trigger-different-sequences-index.html" class="nav-list-link">Triggering different sequences based on context or interaction</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Tutorials submenu" aria-expanded="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/" class="nav-list-link">Tutorials</a><ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/tutorials/01-time/" class="nav-list-link">01 Time in CircuitPython</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="02 Pomodoro submenu" aria-expanded="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/" class="nav-list-link">02 Pomodoro</a><ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step1.html" class="nav-list-link">Step 1: Preparation</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Step 2: Setting up the states submenu" aria-expanded="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step2.html" class="nav-list-link">Step 2: Setting up the states</a><ul class="nav-list"></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Step 3: Adding the LED submenu" aria-expanded="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step3.html" class="nav-list-link">Step 3: Adding the LED</a><ul class="nav-list"></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Step 4: Creating a timer submenu" aria-expanded="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step4.html" class="nav-list-link">Step 4: Creating a timer</a><ul class="nav-list"></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Step 5: Adding an alarm submenu" aria-expanded="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step5.html" class="nav-list-link">Step 5: Adding an alarm</a><ul class="nav-list"></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Step 6: Adding the breaks submenu" aria-expanded="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step6.html" class="nav-list-link">Step 6: Adding the breaks</a><ul class="nav-list"></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Step 7: Additional visualization using the servo submenu" aria-expanded="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step7.html" class="nav-list-link">Step 7: Additional visualization using the servo</a><ul class="nav-list"></ul></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step8.html" class="nav-list-link">Step 8 Assembling the embodiment</a></li></ul></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/tutorials/coding-challenge/" class="nav-list-link">Coding Challenge</a></li></ul></li></ul> <ul class="nav-list"><li class="nav-list-item external"> <a href="https://id-studiolab.github.io/Connected-Interaction-Kit" class="nav-list-link external" target="_blank" rel="noopener noreferrer" > Connected Interaction Kit <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li><li class="nav-list-item external"> <a href="https://brightspace.tudelft.nl/d2l/home/681612" class="nav-list-link external" target="_blank" rel="noopener noreferrer" > DI Brightspace <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li><li class="nav-list-item external"> <a href="https://hedy.org/" class="nav-list-link external" target="_blank" rel="noopener noreferrer" > Hedy - Python learning <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li><li class="nav-list-item external"> <a href="https://www.w3schools.com/python/" class="nav-list-link external" target="_blank" rel="noopener noreferrer" > W3Schools - Python <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li><li class="nav-list-item external"> <a href="https://docs.circuitpython.org/en/latest/README.html" class="nav-list-link external" target="_blank" rel="noopener noreferrer" > CircuitPython Docs <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Digital Interfaces" autocomplete="off"> <label for="search-input" class="search-label"> <span class="sr-only">Search Digital Interfaces</span> <svg viewBox="0 0 24 24" class="search-icon" aria-hidden="true"><use xlink:href="#svg-search"></use></svg> </label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><span>Game code for ChaiNEO</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="reaction-game"> <a href="#reaction-game" class="anchor-heading" aria-labelledby="reaction-game"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Reaction Game </h1> <p>In this weeks assignment we are going to build a simple reaction game and embody it in different shapes and forms.</p> <h2 id="game-logic-and-hardware-involved"> <a href="#game-logic-and-hardware-involved" class="anchor-heading" aria-labelledby="game-logic-and-hardware-involved"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Game logic and hardware involved </h2> <p>The basic game makes use of two input components (either Touch Sensor or Tactile Switch), and a Chainable RGB LED as an output.</p> <p>Once the LED turns white, both players have to try and touch their sensor as quick as possible. Whoever is faster wins the round, and the LED will light up in the corresponding color.</p> <p><img src="/Digital-Interfaces/test/assignments/01-reaction-game-hw-code/reaction_game.jpg" alt="" /></p> <h2 id="connecting-the-cables"> <a href="#connecting-the-cables" class="anchor-heading" aria-labelledby="connecting-the-cables"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Connecting the cables </h2> <p>Your ItsyBitsy has several connection ports on it. To be sure that your code works properly, you need to make sure that the ports to which you connected your components are the same used in your code.</p> <p>For example, if you connect a component to port D7, you need to use the following code to reference it:</p> <div class="table-wrapper"><table> <tbody> <tr> <td><img src="/Digital-Interfaces/test/assignments/01-reaction-game-hw-code/ItsyBitsyPort.png" alt="" /></td> <td><img src="/Digital-Interfaces/test/assignments/01-reaction-game-hw-code/pinAssignment.png" alt="" /></td> </tr> </tbody> </table></div> <h2 id="code-for-the-game"> <a href="#code-for-the-game" class="anchor-heading" aria-labelledby="code-for-the-game"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Code for the game </h2> <p>We provide you with the basic code for the game. Copy this code into your <code class="language-plaintext highlighter-rouge">code.py</code> file and connect all hardware components to have a basic game ready. Look through the code and use the examples from the previous section to deduce where to connect your components!</p> <ul id="data-struct" class="tab" data-tab="8ac82b6f-07e2-4f8d-8f0e-8a3c32b495d9" data-name="data-struct"> <li class="active" id="data-struct-picoexpander"> <a href="#">PicoExpander </a> </li> <li id="data-struct-bitsyexpander"> <a href="#">BitsyExpander </a> </li> </ul> <ul class="tab-content" id="8ac82b6f-07e2-4f8d-8f0e-8a3c32b495d9" data-name="data-struct"> <li class="active"> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">##--- Imports
</span><span class="kn">import</span> <span class="nn">digitalio</span>
<span class="kn">import</span> <span class="nn">board</span>
<span class="kn">import</span> <span class="nn">neopixel</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="c1">##--- Variables
</span><span class="n">state_wait</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">state_start_game</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">state_wait_button_press</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">state_red_wins</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">state_blue_wins</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">current_state</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1"># Button variables
</span><span class="n">red_pin</span> <span class="o">=</span> <span class="n">board</span><span class="p">.</span><span class="n">GP6</span>
<span class="n">red_button</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">DigitalInOut</span><span class="p">(</span><span class="n">red_pin</span><span class="p">)</span>
<span class="n">red_button</span><span class="p">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">Direction</span><span class="p">.</span><span class="n">INPUT</span>

<span class="n">blue_pin</span> <span class="o">=</span> <span class="n">board</span><span class="p">.</span><span class="n">GP8</span>
<span class="n">blue_button</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">DigitalInOut</span><span class="p">(</span><span class="n">blue_pin</span><span class="p">)</span>
<span class="n">blue_button</span><span class="p">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">Direction</span><span class="p">.</span><span class="n">INPUT</span>

<span class="c1"># For the Chainable LED:
</span><span class="n">pin_leds</span> <span class="o">=</span> <span class="n">board</span><span class="p">.</span><span class="n">GP10</span>
<span class="n">num_leds</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">leds</span> <span class="o">=</span> <span class="n">neopixel</span><span class="p">.</span><span class="n">NeoPixel</span><span class="p">(</span><span class="n">pin_leds</span><span class="p">,</span> <span class="n">num_leds</span><span class="p">,</span> <span class="n">auto_write</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">pixel_order</span><span class="o">=</span><span class="n">neopixel</span><span class="p">.</span><span class="n">GRBW</span><span class="p">)</span>

<span class="n">led_off</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">led_red</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">led_blue</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">led_white</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>

<span class="c1"># Timer variables
</span><span class="n">timer_duration</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">timer_mark</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1">##--- Functions
</span><span class="k">def</span> <span class="nf">set_led_color</span><span class="p">(</span><span class="n">color</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">leds</span>
    <span class="n">leds</span><span class="p">.</span><span class="n">fill</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
    <span class="n">leds</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">set_timer</span><span class="p">(</span><span class="n">duration</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">timer_duration</span><span class="p">,</span> <span class="n">timer_mark</span>
    <span class="n">timer_duration</span> <span class="o">=</span> <span class="n">duration</span>
    <span class="n">timer_mark</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="n">monotonic</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">timer_expired</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">timer_mark</span><span class="p">,</span> <span class="n">timer_duration</span>
    <span class="k">if</span> <span class="n">time</span><span class="p">.</span><span class="n">monotonic</span><span class="p">()</span> <span class="o">-</span> <span class="n">timer_mark</span> <span class="o">&gt;</span> <span class="n">timer_duration</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>

<span class="c1">##--- Main loop
</span><span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">current_state</span> <span class="o">==</span> <span class="n">state_wait</span><span class="p">:</span>
        <span class="n">set_led_color</span><span class="p">(</span><span class="n">led_off</span><span class="p">)</span>
        <span class="n">set_timer</span><span class="p">(</span><span class="n">random</span><span class="p">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"starting game!"</span><span class="p">)</span>
        <span class="n">current_state</span> <span class="o">=</span> <span class="n">state_start_game</span>

    <span class="k">elif</span> <span class="n">current_state</span> <span class="o">==</span> <span class="n">state_start_game</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">timer_expired</span><span class="p">():</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"timer expired, press your buttons!"</span><span class="p">)</span>
            <span class="n">set_led_color</span><span class="p">(</span><span class="n">led_white</span><span class="p">)</span>
            <span class="n">current_state</span> <span class="o">=</span> <span class="n">state_wait_button_press</span>

    <span class="k">elif</span> <span class="n">current_state</span> <span class="o">==</span> <span class="n">state_wait_button_press</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">red_button</span><span class="p">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"red won"</span><span class="p">)</span>
            <span class="n">current_state</span> <span class="o">=</span> <span class="n">state_red_wins</span>
        <span class="k">elif</span> <span class="n">blue_button</span><span class="p">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"blue won"</span><span class="p">)</span>
            <span class="n">current_state</span> <span class="o">=</span> <span class="n">state_blue_wins</span>

    <span class="k">elif</span> <span class="n">current_state</span> <span class="o">==</span> <span class="n">state_blue_wins</span><span class="p">:</span>
        <span class="n">set_led_color</span><span class="p">(</span><span class="n">led_blue</span><span class="p">)</span>
        <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">current_state</span> <span class="o">=</span> <span class="n">state_wait</span>

    <span class="k">elif</span> <span class="n">current_state</span> <span class="o">==</span> <span class="n">state_red_wins</span><span class="p">:</span>
        <span class="n">set_led_color</span><span class="p">(</span><span class="n">led_red</span><span class="p">)</span>
        <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">current_state</span> <span class="o">=</span> <span class="n">state_wait</span>
</code></pre></div></div> </li> <li> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">##--- Imports
</span><span class="kn">import</span> <span class="nn">digitalio</span>
<span class="kn">import</span> <span class="nn">board</span>
<span class="kn">import</span> <span class="nn">neopixel</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="c1">##--- Variables
</span><span class="n">state_wait</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">state_start_game</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">state_wait_button_press</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">state_red_wins</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">state_blue_wins</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">current_state</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1"># Button variables
</span><span class="n">red_pin</span> <span class="o">=</span> <span class="n">board</span><span class="p">.</span><span class="n">D7</span>
<span class="n">red_button</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">DigitalInOut</span><span class="p">(</span><span class="n">red_pin</span><span class="p">)</span>
<span class="n">red_button</span><span class="p">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">Direction</span><span class="p">.</span><span class="n">INPUT</span>

<span class="n">blue_pin</span> <span class="o">=</span> <span class="n">board</span><span class="p">.</span><span class="n">D13</span>
<span class="n">blue_button</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">DigitalInOut</span><span class="p">(</span><span class="n">blue_pin</span><span class="p">)</span>
<span class="n">blue_button</span><span class="p">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">digitalio</span><span class="p">.</span><span class="n">Direction</span><span class="p">.</span><span class="n">INPUT</span>

<span class="c1"># For the Chainable LED:
</span><span class="n">pin_leds</span> <span class="o">=</span> <span class="n">board</span><span class="p">.</span><span class="n">D3</span>
<span class="n">num_leds</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">leds</span> <span class="o">=</span> <span class="n">neopixel</span><span class="p">.</span><span class="n">NeoPixel</span><span class="p">(</span><span class="n">pin_leds</span><span class="p">,</span> <span class="n">num_leds</span><span class="p">,</span> <span class="n">auto_write</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">pixel_order</span><span class="o">=</span><span class="n">neopixel</span><span class="p">.</span><span class="n">GRBW</span><span class="p">)</span>

<span class="n">led_off</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">led_red</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">led_blue</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">led_white</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>

<span class="c1"># Timer variables
</span><span class="n">timer_duration</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">timer_mark</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1">##--- Functions
</span><span class="k">def</span> <span class="nf">set_led_color</span><span class="p">(</span><span class="n">color</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">leds</span>
    <span class="n">leds</span><span class="p">.</span><span class="n">fill</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
    <span class="n">leds</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">set_timer</span><span class="p">(</span><span class="n">duration</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">timer_duration</span><span class="p">,</span> <span class="n">timer_mark</span>
    <span class="n">timer_duration</span> <span class="o">=</span> <span class="n">duration</span>
    <span class="n">timer_mark</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="n">monotonic</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">timer_expired</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">timer_mark</span><span class="p">,</span> <span class="n">timer_duration</span>
    <span class="k">if</span> <span class="n">time</span><span class="p">.</span><span class="n">monotonic</span><span class="p">()</span> <span class="o">-</span> <span class="n">timer_mark</span> <span class="o">&gt;</span> <span class="n">timer_duration</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>

<span class="c1">##--- Main loop
</span><span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">current_state</span> <span class="o">==</span> <span class="n">state_wait</span><span class="p">:</span>
        <span class="n">set_led_color</span><span class="p">(</span><span class="n">led_off</span><span class="p">)</span>
        <span class="n">set_timer</span><span class="p">(</span><span class="n">random</span><span class="p">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"starting game!"</span><span class="p">)</span>
        <span class="n">current_state</span> <span class="o">=</span> <span class="n">state_start_game</span>

    <span class="k">elif</span> <span class="n">current_state</span> <span class="o">==</span> <span class="n">state_start_game</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">timer_expired</span><span class="p">():</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"timer expired, press your buttons!"</span><span class="p">)</span>
            <span class="n">set_led_color</span><span class="p">(</span><span class="n">led_white</span><span class="p">)</span>
            <span class="n">current_state</span> <span class="o">=</span> <span class="n">state_wait_button_press</span>

    <span class="k">elif</span> <span class="n">current_state</span> <span class="o">==</span> <span class="n">state_wait_button_press</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">red_button</span><span class="p">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"red won"</span><span class="p">)</span>
            <span class="n">current_state</span> <span class="o">=</span> <span class="n">state_red_wins</span>
        <span class="k">elif</span> <span class="n">blue_button</span><span class="p">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"blue won"</span><span class="p">)</span>
            <span class="n">current_state</span> <span class="o">=</span> <span class="n">state_blue_wins</span>

    <span class="k">elif</span> <span class="n">current_state</span> <span class="o">==</span> <span class="n">state_blue_wins</span><span class="p">:</span>
        <span class="n">set_led_color</span><span class="p">(</span><span class="n">led_blue</span><span class="p">)</span>
        <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">current_state</span> <span class="o">=</span> <span class="n">state_wait</span>

    <span class="k">elif</span> <span class="n">current_state</span> <span class="o">==</span> <span class="n">state_red_wins</span><span class="p">:</span>
        <span class="n">set_led_color</span><span class="p">(</span><span class="n">led_red</span><span class="p">)</span>
        <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">current_state</span> <span class="o">=</span> <span class="n">state_wait</span>
</code></pre></div></div> </li> </ul> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
