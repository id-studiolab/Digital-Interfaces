<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/Digital-Interfaces/test/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/Digital-Interfaces/test/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li:not(:nth-child(1)) > a, .site-nav > ul.nav-list:first-child > li > ul > li a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(1) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(1) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(1) > ul.nav-list { display: block; } </style> <script src="/Digital-Interfaces/test/assets/js/vendor/lunr.min.js"></script> <script src="/Digital-Interfaces/test/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Step 6: Adding the breaks | Digital Interfaces</title> <meta name="generator" content="Jekyll v3.10.0" /> <meta property="og:title" content="Step 6: Adding the breaks" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Repository for the BSc course Digital Interfaces" /> <meta property="og:description" content="Repository for the BSc course Digital Interfaces" /> <meta property="og:site_name" content="Digital Interfaces" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Step 6: Adding the breaks" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Repository for the BSc course Digital Interfaces","headline":"Step 6: Adding the breaks","url":"/Digital-Interfaces/test/tutorials/02-pomodoro/step6.html"}</script> <!-- End Jekyll SEO tag --> <!-- CSS and JS for jekyll-tabs --> <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jekyll-tabs@1.1.0/dist/tabs.css"> --> <!-- <script type="text/javascript" src="/assets/js/tabs.js"></script> --> <script src="/Digital-Interfaces/test/assets/js/tabs.js" type="text/javascript"></script> <link rel="stylesheet" href="/Digital-Interfaces/test/assets/css/tabs.css"> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/Digital-Interfaces/test/" class="site-title lh-tight"> Digital Interfaces </a> <button id="menu-button" class="site-button btn-reset" aria-label="Menu" aria-expanded="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/" class="nav-list-link">Home</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Assignments submenu" aria-expanded="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/assignments/" class="nav-list-link">Assignments</a><ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/01-reaction-game-hw-code/" class="nav-list-link">1: Reaction Game - Hardware and Code</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/02-reaction-game-embodiment/" class="nav-list-link">2: Reaction Game - Embodiment</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/03-game-controller-hw-code/" class="nav-list-link">3: Game Controller - Hardware and Code</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/04-game-controller-embodiment/" class="nav-list-link">4: Game Controller Embodiment</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/05-walkie-talkie-hw-code/" class="nav-list-link">5: Walkie-Talkie - Hardware and Code</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/06-walkie-talkie-embodiment/" class="nav-list-link">6: Walkie-Talkie - Embodiment</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="7+8: Animistic Design submenu" aria-expanded="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/" class="nav-list-link">7+8: Animistic Design</a><ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/varspeed-library-guide.html" class="nav-list-link">VarSpeed Library Guide</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/fading-and-blinking-a-chainable-led-index.html" class="nav-list-link">Fading and blinking a Chainable LED</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/running-two-sequences-index.html" class="nav-list-link">Running two sequences simultaneously</a></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/assignments/07+08-animistic-design/trigger-different-sequences-index.html" class="nav-list-link">Triggering different sequences based on context or interaction</a></li></ul></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Tutorials submenu" aria-expanded="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/" class="nav-list-link">Tutorials</a><ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/tutorials/01-time/" class="nav-list-link">01 Time in CircuitPython</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="02 Pomodoro submenu" aria-expanded="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/" class="nav-list-link">02 Pomodoro</a><ul class="nav-list"><li class="nav-list-item"><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step1.html" class="nav-list-link">Step 1: Preparation</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Step 2: Setting up the states submenu" aria-expanded="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step2.html" class="nav-list-link">Step 2: Setting up the states</a><ul class="nav-list"></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Step 3: Adding the LED submenu" aria-expanded="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step3.html" class="nav-list-link">Step 3: Adding the LED</a><ul class="nav-list"></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Step 4: Creating a timer submenu" aria-expanded="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step4.html" class="nav-list-link">Step 4: Creating a timer</a><ul class="nav-list"></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Step 5: Adding an alarm submenu" aria-expanded="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step5.html" class="nav-list-link">Step 5: Adding an alarm</a><ul class="nav-list"></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Step 6: Adding the breaks submenu" aria-expanded="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step6.html" class="nav-list-link">Step 6: Adding the breaks</a><ul class="nav-list"></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Step 7: Additional visualization using the servo submenu" aria-expanded="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step7.html" class="nav-list-link">Step 7: Additional visualization using the servo</a><ul class="nav-list"></ul></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step8.html" class="nav-list-link">Step 8 Assembling the embodiment</a></li></ul></li><li class="nav-list-item"><a href="/Digital-Interfaces/test/tutorials/coding-challenge/" class="nav-list-link">Coding Challenge</a></li></ul></li></ul> <ul class="nav-list"><li class="nav-list-item external"> <a href="https://id-studiolab.github.io/Connected-Interaction-Kit" class="nav-list-link external" target="_blank" rel="noopener noreferrer" > Connected Interaction Kit <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li><li class="nav-list-item external"> <a href="https://brightspace.tudelft.nl/d2l/home/681612" class="nav-list-link external" target="_blank" rel="noopener noreferrer" > DI Brightspace <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li><li class="nav-list-item external"> <a href="https://hedy.org/" class="nav-list-link external" target="_blank" rel="noopener noreferrer" > Hedy - Python learning <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li><li class="nav-list-item external"> <a href="https://www.w3schools.com/python/" class="nav-list-link external" target="_blank" rel="noopener noreferrer" > W3Schools - Python <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li><li class="nav-list-item external"> <a href="https://docs.circuitpython.org/en/latest/README.html" class="nav-list-link external" target="_blank" rel="noopener noreferrer" > CircuitPython Docs <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Digital Interfaces" autocomplete="off"> <label for="search-input" class="search-label"> <span class="sr-only">Search Digital Interfaces</span> <svg viewBox="0 0 24 24" class="search-icon" aria-hidden="true"><use xlink:href="#svg-search"></use></svg> </label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/Digital-Interfaces/test/tutorials/">Tutorials</a></li> <li class="breadcrumb-nav-list-item"><a href="/Digital-Interfaces/test/tutorials/02-pomodoro/">02 Pomodoro</a></li> <li class="breadcrumb-nav-list-item"><span>Step 6: Adding the breaks</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="step-6-adding-the-breaks"> <a href="#step-6-adding-the-breaks" class="anchor-heading" aria-labelledby="step-6-adding-the-breaks"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 6: Adding the breaks </h1> <h2 id="step-61-short-break"> <a href="#step-61-short-break" class="anchor-heading" aria-labelledby="step-61-short-break"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 6.1 Short break </h2> <p>Instead of returning to <code class="language-plaintext highlighter-rouge">state_idle</code>, we want to give the user a timed break, which can be either a short break or a long break. We start with the short break. Add <em>state_short_break</em> to your variables. When the break is over, we also want to alert the user that their break is over. This state, <em>state_work_alarm</em>, should also be in your list of variables. We also store its duration in a variable called <em>short_break_duration</em>. It is set to three seconds now:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">##--- Variables
# State variables
</span><span class="n">state_short_break</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">state_work_alarm</span> <span class="o">=</span> <span class="mi">4</span>

<span class="c1"># Timer variables
</span><span class="n">short_break_duration</span> <span class="o">=</span> <span class="mi">3</span>

</code></pre></div></div> <p>The functions that we made in the last steps should be enough to implement the behavior we want. We need to add two more elif statements to take the two new states into account. The program should enter <em>state_short_break</em> when <em>state_break_alarm</em> is over, and go into <em>state_work_alarm</em> when the break is over. From <em>state_work_alarm</em>, it should return to <em>state_work</em>. We can make use of the different LED colors to differentiate between all these states.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">##--- Main loop
</span><span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="c1"># State Idle
</span>    <span class="k">if</span> <span class="n">current_state</span> <span class="o">==</span> <span class="n">state_idle</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">check_button_press</span><span class="p">():</span>
            <span class="n">current_state</span> <span class="o">=</span> <span class="n">state_work</span>
            <span class="n">set_led_color</span><span class="p">(</span><span class="n">led_green</span><span class="p">)</span>
            <span class="n">set_timer</span><span class="p">(</span><span class="n">work_duration</span><span class="p">)</span>
            <span class="n">set_buzzer</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

    <span class="c1"># State Work
</span>    <span class="k">elif</span> <span class="n">current_state</span> <span class="o">==</span> <span class="n">state_work</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">timer_expired</span><span class="p">():</span>
            <span class="n">current_state</span> <span class="o">=</span> <span class="n">state_break_alarm</span>
            <span class="n">set_led_color</span><span class="p">(</span><span class="n">led_red</span><span class="p">)</span>
            <span class="n">set_buzzer</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
    
    <span class="c1"># State Break Alarm
</span>    <span class="k">elif</span> <span class="n">current_state</span> <span class="o">==</span> <span class="n">state_break_alarm</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">check_button_press</span><span class="p">():</span>
            <span class="n">current_state</span> <span class="o">=</span> <span class="n">state_short_break</span>
            <span class="n">set_led_color</span><span class="p">(</span><span class="n">led_blue</span><span class="p">)</span>
            <span class="n">set_timer</span><span class="p">(</span><span class="n">short_break_duration</span><span class="p">)</span>
            <span class="n">set_buzzer</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

    <span class="c1"># State Short Break
</span>    <span class="k">elif</span> <span class="n">current_state</span> <span class="o">==</span> <span class="n">state_short_break</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">timer_expired</span><span class="p">():</span>
            <span class="n">current_state</span> <span class="o">=</span> <span class="n">state_work_alarm</span>
            <span class="n">set_led_color</span><span class="p">(</span><span class="n">led_yellow</span><span class="p">)</span>
            <span class="n">set_buzzer</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

    <span class="c1"># State Work Alarm
</span>    <span class="k">elif</span> <span class="n">current_state</span> <span class="o">==</span> <span class="n">state_work_alarm</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">check_button_press</span><span class="p">():</span>
            <span class="n">current_state</span> <span class="o">=</span> <span class="n">state_work</span>
            <span class="n">set_led_color</span><span class="p">(</span><span class="n">led_green</span><span class="p">)</span>
            <span class="n">set_timer</span><span class="p">(</span><span class="n">work_duration</span><span class="p">)</span>
            <span class="n">set_buzzer</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

</code></pre></div></div> <p>It’s time to upload your code to the ItsyBitsy and see if it works! Your code should now:</p> <ul> <li>Have the LED turn a different color upon entering a new state</li> <li>Sound the alarm in states state_break_alarm and state_work_alarm</li> <li>Give the user a timed break</li> </ul> <p>Here you can find the code we have until now: ** add link **</p> <h2 id="step-62-long-break"> <a href="#step-62-long-break" class="anchor-heading" aria-labelledby="step-62-long-break"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 6.2 Long break </h2> <p>After three short breaks, we want to give the user a long break before they have to go back to work. We need to take into account how many breaks the user has had. Create a new variable called <em>break_counter</em>, a new state called <em>state_long_break</em>, and a variable for the duration:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">##--- Variables
</span><span class="n">break_counter</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1"># State variables 
</span><span class="n">state_long_break</span> <span class="o">=</span> <span class="mi">5</span>

<span class="c1"># Timer variables
</span><span class="n">long_break_duration</span> <span class="o">=</span> <span class="mi">8</span>

</code></pre></div></div> <p>Now we need to go into <em>state_break_alarm</em> and count how many times the alarm has gone off. If this number is less than 3, we enter <em>state_short_break</em>. If it’s 3 or more, we reset the <em>break_counter</em> back to 0 and enter <em>state_long_break</em>.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># State Break Alarm
</span>    <span class="k">elif</span> <span class="n">current_state</span> <span class="o">==</span> <span class="n">state_break_alarm</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">check_button_press</span><span class="p">():</span>
            <span class="n">set_buzzer</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">break_counter</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">current_state</span> <span class="o">=</span> <span class="n">state_short_break</span>
                <span class="n">set_led_color</span><span class="p">(</span><span class="n">led_blue</span><span class="p">)</span>
                <span class="n">set_timer</span><span class="p">(</span><span class="n">short_break_duration</span><span class="p">)</span>
                <span class="n">break_counter</span> <span class="o">=</span> <span class="n">break_counter</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">current_state</span> <span class="o">=</span> <span class="n">state_long_break</span>
                <span class="n">set_led_color</span><span class="p">(</span><span class="n">led_white</span><span class="p">)</span>
                <span class="n">set_timer</span><span class="p">(</span><span class="n">long_break_duration</span><span class="p">)</span>
                <span class="n">break_counter</span> <span class="o">=</span> <span class="mi">0</span>

</code></pre></div></div> <p>Now we can add the behavior for the long break. When the timer runs out, we want to turn off the Pomodoro timer and return to <em>state_idle</em>:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># State Long Break
</span>    <span class="k">elif</span> <span class="n">current_state</span> <span class="o">==</span> <span class="n">state_long_break</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">timer_expired</span><span class="p">():</span>
            <span class="n">current_state</span> <span class="o">=</span> <span class="n">state_idle</span>
            <span class="n">set_led_color</span><span class="p">(</span><span class="n">led_off</span><span class="p">)</span>
            <span class="n">set_buzzer</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

</code></pre></div></div> <p>And here we have a functional Pomodoro timer! Upload your code to the ItsyBitsy and see if it works.</p> <p><a href="step6-code">Click here to see the code you should have until now.</a></p> <p><a href="step7" class="btn btn-blue">Next Step</a></p> <hr> <h2 class="text-delta">Table of contents</h2> <ul> <li> <a href="/Digital-Interfaces/test/tutorials/02-pomodoro/step6-code.html">Step 6: Code until now</a> </li> </ul> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
